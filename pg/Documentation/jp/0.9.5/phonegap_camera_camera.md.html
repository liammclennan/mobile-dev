<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
<meta name="generator" content="joDoc">
<title>PhoneGap API Documentation</title>
<link rel="stylesheet" type="text/css" href="index.css">
<link rel="stylesheet" type="text/css" href="mobile.css" media="only screen and (max-device-width: 1024px)">
<link rel="stylesheet" type="text/css" href="prettify/prettify.css">
</head>
<body>
        <div id="header">
            <h1><a href="index.html">Phone<strong>Gap</strong> Documentation</a></h1>
            <small>
                <select><optgroup label="English" value="en">
<option value="edge">edge</option>
<option value="1.2.0">1.2.0</option>
<option value="1.1.0">1.1.0</option>
<option value="1.0.0rc3">1.0.0rc3</option>
<option value="1.0.0rc2">1.0.0rc2</option>
<option value="1.0.0rc1">1.0.0rc1</option>
<option value="1.0.0">1.0.0</option>
<option value="0.9.6">0.9.6</option>
<option value="0.9.5.1">0.9.5.1</option>
<option value="0.9.5">0.9.5</option>
<option value="0.9.4">0.9.4</option>
<option value="0.9.3">0.9.3</option>
<option value="0.9.2">0.9.2</option>
</optgroup>
<optgroup label="Español" value="es"><option value="1.0.0">1.0.0</option></optgroup>
<optgroup label="Japanese" value="jp"><option selected value="0.9.5">0.9.5</option></optgroup></select></small>
        </div>
        <div id="subheader">
            <h1>カメラ制御</h1>
            <small><select><option value="%E3%82%AB%E3%83%A1%E3%83%A9%E5%88%B6%E5%BE%A1">カメラ制御</option>
<option value="カメラ制御_">      - メソッド</option>
<option value="camera.getPicture">camera.getPicture</option>
<option value="camera.getPicture_">      - 概要</option>
<option value="camera.getPicture_">      - サポートされているプラットフォーム</option>
<option value="camera.getPicture_">      - 使用例</option>
<option value="camera.getPicture_">      - 詳細な使用例</option>
<option value="cameraSuccess">cameraSuccess</option>
<option value="cameraSuccess_">      - パラメータ</option>
<option value="cameraSuccess_">      - 使用例</option>
<option value="cameraError">cameraError</option>
<option value="cameraError_">      - パラメータ</option>
<option value="cameraOptions">cameraOptions</option>
<option value="cameraOptions_">      - オプションの内容</option>
<option value="cameraOptions_android">      - Androidに関する注意点</option>
<option value="cameraOptions_blackberry">      - BlackBerryに関する注意点</option>
<option value="cameraOptions_palm">      - Palmに関する注意点</option>
<option value="cameraOptions_iphone">      - iPhoneに関する注意点</option></select></small>
        </div>

        <div id="sidebar">
            <div class="vertical_divider"></div>
            <h1>API Reference</h1>
            <ul>
<li><a href="phonegap_accelerometer_accelerometer.md.html#Accelerometer">Accelerometer</a></li>
<li><a href="phonegap_camera_camera.md.html#%E3%82%AB%E3%83%A1%E3%83%A9%E5%88%B6%E5%BE%A1">カメラ制御</a></li>
<li><a href="phonegap_contacts_contacts.md.html#%E9%80%A3%E7%B5%A1%E5%85%88">連絡先</a></li>
<li><a href="phonegap_device_device.md.html#Device">Device</a></li>
<li><a href="phonegap_events_events.md.html#Events">Events</a></li>
<li><a href="phonegap_file_file.md.html#File">File</a></li>
<li><a href="phonegap_geolocation_geolocation.md.html#Geolocation">Geolocation</a></li>
<li><a href="phonegap_media_media.md.html#Media">Media</a></li>
<li><a href="phonegap_network_network.md.html#Network">Network</a></li>
<li><a href="phonegap_notification_notification.md.html#Notification">Notification</a></li>
<li><a href="phonegap_storage_storage.md.html#Storage">Storage</a></li>
</ul>
<h1></h1>
            <ul>
<li><a href="_index.html">Keyword Index</a></li>
            </ul>
</div>

        <div id="scrollable">
            <div id="content">
                <h1><a name="%E3%82%AB%E3%83%A1%E3%83%A9%E5%88%B6%E5%BE%A1">カメラ制御</a></h1>

<blockquote>
  <p><code>camera</code> オブジェクトは、デバイスのカメラアプリへの制御を提供します。</p>
</blockquote>

<h2>
<a name="%E3%82%AB%E3%83%A1%E3%83%A9%E5%88%B6%E5%BE%A1_">メソッド</a>
</h2>

<ul>
<li><a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a></li>
</ul>
<hr>
<h1><a name="camera.getPicture">camera.getPicture</a></h1>

<p>デバイスのカメラで写真を撮る、またはデバイスのアルバム内にある写真を検索します。
Base64形式でエンコードされたフォトイメージを表す文字列、またはイメージファイルのURIが返されます。</p>

<pre class="prettyprint"><code>navigator.<a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a>( <a href="phonegap_camera_camera.md.html#cameraSuccess">cameraSuccess</a>, <a href="phonegap_camera_camera.md.html#cameraError">cameraError</a>, [ <a href="phonegap_camera_camera.md.html#cameraOptions">cameraOptions</a> ] );
</code></pre>

<h2>
<a name="camera.getPicture_">概要</a>
</h2>

<p><code><a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a></code> 関数はデバイスが標準で備えるカメラアプリを実行します。
( この際<code>Camera.sourceType = Camera.PictureSourceType.CAMERA</code> に設定する必要がありますが、デフォルトの設定となります。) 
写真の撮影が完了するとカメラアプリは終了し、アプリケーションに戻ります。</p>

<p><code>Camera.sourceType = Camera.PictureSourceType.PHOTOLIBRARY</code> もしくは 
 <code>Camera.PictureSourceType.SAVEDPHOTOALBUM</code> が指定された場合、
 写真選択ダイアログが表示され、アルバムから写真を選択できるようになります。</p>

<p>返り値は <code><a href="phonegap_camera_camera.md.html#cameraSuccess">cameraSuccess</a></code> 関数に送信されます。値は <code><a href="phonegap_camera_camera.md.html#cameraOptions">cameraOptions</a></code> の設定に従い、以下のいずれかのフォーマットで送られます。</p>

<ul>
<li>Base64形式でエンコードされたフォトイメージを表す文字列 (デフォルト)</li>
<li>ローカルストレージ内に記録されたファイルの場所を表す文字列</li>
</ul>
<p>エンコードされたイメージやURIをもとに、以下のような処理の記述が可能です。。</p>

<ul>
<li>
<img>タグで画像を表示 <em>(下記の例を参考にしてください)</em>
</li>
<li>データをローカルに保存 ( <code>LocalStorage</code> や <a class="external" href="http://brianleroux.github.com/lawnchair/">Lawnchair</a> を使用します)</li>
<li>データをリモートサーバーに送信</li>
</ul>
<p>注意： iPhone 4 や Black Berry Touch 9800 などの最新デバイスで撮影したイメージの画質は良好です。
ただし、そのような画像データをBase64でエンコードすると、メモリーの問題が発生します。
よって、 FILE_URI を Camera.destinationType として使用することが推奨されます。</p>

<h2>
<a name="camera.getPicture_">サポートされているプラットフォーム</a>
</h2>

<ul>
<li>Android</li>
<li>Blackberry WebWorks (OS 5.0 以上)</li>
<li>iPhone</li>
</ul>
<h2>
<a name="camera.getPicture_">使用例</a>
</h2>

<p>撮影した写真をBase64形式のイメージとして取得します。</p>

<pre class="prettyprint"><code>navigator.<a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a>(onSuccess, onFail, { quality: 50 }); 

function onSuccess(imageData) {
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
}

function onFail(message) {
    alert('エラーが発生しました: ' + message);
}
</code></pre>

<p>撮影した写真のURIを取得します。</p>

<pre class="prettyprint"><code>navigator.<a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a>(onSuccess, onFail, { quality: 50, 
    destinationType: Camera.DestinationType.FILE_URI }); 

function onSuccess(imageURI) {
    var image = document.getElementById('myImage');
    image.src = imageURI;
}

function onFail(message) {
    alert('エラーが発生しました: ' + message);
}
</code></pre>

<h2>
<a name="camera.getPicture_">詳細な使用例</a>
</h2>

<pre class="prettyprint"><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                      "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;写真を撮ってみよう&lt;/title&gt;

    &lt;script type="text/javascript" charset="utf-8" src="phonegap.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" charset="utf-8"&gt;

    var pictureSource;   // 写真ソース
    var destinationType; // 戻り値のフォーマット

    // PhoneGapがデバイスと接続するまで待機
    //
    function onLoad() {
        document.addEventListener("<a href="phonegap_events_events.md.html#deviceready">deviceready</a>",onDeviceReady,false);
    }

    // PhoneGap準備完了
    //
    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }

    // 写真の撮影に成功した場合（その1）
    //
    function onPhotoDataSuccess(imageData) {
      // 下記のコメントを外すことでBase64形式のデータをログに出力
      // console.log(imageData);

      // 画像ハンドルを取得
      //
      var smallImage = document.getElementById('smallImage');

      // 画像要素を表示
      //
      smallImage.style.display = 'block';

      // 取得した写真を表示
      // 画像のリサイズにインラインCSSを使用
      //
      smallImage.src = "data:image/jpeg;base64," + imageData;
    }

    // 写真の撮影に成功した場合（その2）
    //
    function onPhotoURISuccess(imageURI) {
      // 下記のコメントを外すことでファイルURIをログに出力
      // console.log(imageURI);

      // 画像ハンドルを取得
      //
      var largeImage = document.getElementById('largeImage');

      // 画像要素を表示
      //
      largeImage.style.display = 'block';

      // 取得した写真を表示
      // 画像のリサイズにインラインCSSを使用
      //
      largeImage.src = imageURI;
    }

    // ボタンがクリックされた場合の処理
    //
    function capturePhoto() {
      // 撮影した写真をBase64形式の文字列として取得する場合
      navigator.<a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a>(onPhotoDataSuccess, onFail, { quality: 50 });
    }

    // ボタンがクリックされた場合の処理
    //
    function capturePhotoEdit() {
      // 撮影した写真を編集したあと、Base64形式の文字列として取得する場合
      navigator.<a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a>(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true }); 
    }

    // ボタンがクリックされた場合の処理
    //
    function getPhoto(source) {
      // 撮影した写真をファイルURIとして取得する場合
      navigator.<a href="phonegap_camera_camera.md.html#camera.getPicture">camera.getPicture</a>(onPhotoURISuccess, onFail, { quality: 50, 
        destinationType: destinationType.FILE_URI,
        sourceType: source });
    }

    // エラー発生時の処理
    // 
    function onFail(mesage) {
      alert('エラーが発生しました: ' + message);
    }

    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body onload="onLoad()"&gt;
    &lt;button onclick="capturePhoto();"&gt;写真を撮影&lt;/button&gt; &lt;br&gt;
    &lt;button onclick="capturePhotoEdit();"&gt;写真を撮影して編集&lt;/button&gt; &lt;br&gt;
    &lt;button onclick="getPhoto(pictureSource.PHOTOLIBRARY);"&gt;フォトライブラリから取得&lt;/button&gt;&lt;br&gt;
    &lt;button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);"&gt;フォトアルバムから取得&lt;/button&gt;&lt;br&gt;
    &lt;img style="display:none;width:60px;height:60px;" id="smallImage" src="" /&gt;
    &lt;img style="display:none;" id="largeImage" src="" /&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<hr>
<h1><a name="cameraSuccess">cameraSuccess</a></h1>

<p>撮影に成功した場合に呼び出されるコールバック関数です。</p>

<pre class="prettyprint"><code>function(imageData) {
    // 任意のコード
}
</code></pre>

<h2>
<a name="cameraSuccess_">パラメータ</a>
</h2>

<ul>
<li>
<strong>imageData:</strong> Base64 によるイメージエンコーディング、またはイメージファイルの URI (<a href="phonegap_camera_camera.md.html#cameraOptions">cameraOptions</a>で設定)</li>
</ul>
<h2>
<a name="cameraSuccess_">使用例</a>
</h2>

<pre class="prettyprint"><code>// 画像を表示
//
function cameraCallback(imageData) {
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
}
</code></pre>

<hr>
<h1><a name="cameraError">cameraError</a></h1>

<p>エラーが発生した場合に呼び出されるコールバック関数です。</p>

<pre class="prettyprint"><code>function(message) {
    // エラーメッセージを表示
}
</code></pre>

<h2>
<a name="cameraError_">パラメータ</a>
</h2>

<ul>
<li>
<strong>message:</strong> デバイスのネイティブコードによって与えられたメッセージを表します (<code>String</code>)</li>
</ul>
<hr>
<h1><a name="cameraOptions">cameraOptions</a></h1>

<p>カメラの設定オプションのためのパラメータを表します。</p>

<pre class="prettyprint"><code>{ quality : 75, 
  destinationType : Camera.DestinationType.DATA_URL, 
  sourceType : Camera.PictureSourceType.CAMERA, 
  allowEdit : true };
</code></pre>

<h2>
<a name="cameraOptions_">オプションの内容</a>
</h2>

<ul>
<li><p><strong>quality:</strong> イメージの画質を指定します。範囲:0から100 (<code>Number</code>)</p></li>
<li>
<p><strong>destinationType:</strong> navigator.camera.DestinationTypeで定義された返り値のフォーマットを指定します (<code>Number</code>)</p>

<pre class="prettyprint"><code>    Camera.DestinationType = {
        DATA_URL : 0,                // 画像をBase64形式で取得
        FILE_URI : 1                 // ファイルURIとして取得
    };
</code></pre>
</li>
<li>
<p><strong>sourceType:</strong> navigator.camera.PictureSourceType で定義された取得ソースを指定します (<code>Number</code>)</p>

<pre class="prettyprint"><code>Camera.PictureSourceType = {
    PHOTOLIBRARY : 0,    // フォトライブラリ
    CAMERA : 1,          // カメラ
    SAVEDPHOTOALBUM : 2  // フォトアルバム
};
</code></pre>
</li>
<li><p><strong>allowEdit:</strong> イメージの簡単な編集を許可します (<code>Boolean</code>)</p></li>
</ul>
<h2>
<a name="cameraOptions_android">Androidに関する注意点</a>
</h2>

<ul>
<li>
<code>allowEdit</code> パラメータは無視されます</li>
<li>Camera.PictureSourceType.PHOTOLIBRARY と Camera.PictureSourceType.SAVEDPHOTOALBUM は同じフォトアルバムを表示します。</li>
</ul>
<h2>
<a name="cameraOptions_blackberry">BlackBerryに関する注意点</a>
</h2>

<ul>
<li>
<code>quality</code> パラメータは無視されます</li>
<li>
<code>sourceType</code> パラメータは無視されます</li>
<li>
<code>allowEdit</code> パラメータは無視されます</li>
<li>撮影アプリを閉じるためには、アプリケーションにキー入力許可の権限が付与されている必要があります。</li>
<li>大きなサイズで撮影を行った場合、高画質カメラを搭載したデバイスでエンコードすることができない場合があります (例: Torch 9800)。</li>
</ul>
<h2>
<a name="cameraOptions_palm">Palmに関する注意点</a>
</h2>

<ul>
<li>
<code>quality</code> パラメータは無視されます</li>
<li>
<code>sourceType</code> パラメータは無視されます</li>
<li>
<code>allowEdit</code> パラメータは無視されます</li>
</ul>
<h2>
<a name="cameraOptions_iphone">iPhoneに関する注意点</a>
</h2>

<ul>
<li>メモリエラーを防ぐには、<code>quality</code> パラメータを50以下に設定してください。</li>
<li>
<code>destinationType.FILE_URI</code> が使用された場合、撮られた写真や編集された写真は
アプリケーションの Documents/tmp ディレクトリに保存されます。</li>
<li>
<p>アプリケーションの Documents/tmp ディレクトリはアプリ終了とともに消去されます。
もしストレージの空きが少ない場合、このディレクトリは navigator.fileMgr API をつかって消去できます。</p>

<pre class="prettyprint"><code>   navigator.fileMgr.deleteDirectory("tmp", onSuccess, onFail);
</code></pre>
</li>
</ul>
</div>
        </div>

        <!-- Functionality and Syntax Highlighting -->
        <script type="text/javascript" src="index.js"></script><script type="text/javascript" src="prettify/prettify.js"></script>
</body>
</html>
